<div class="container mt-5">
  <h2 class="text-success mb-4">Welcome, <%= current_user.name %>!</h2>

  <!-- Toggle Buttons with Highlight -->
  <div class="mb-4">
    <%= link_to 'Show My Books', dashboard_path(view: 'active'),
      class: "btn me-2 #{params[:view] != 'deleted' ? 'btn-success' : 'btn-outline-success'}" %>
    <%= link_to 'Show Deleted Books', dashboard_path(view: 'deleted'),
      class: "btn #{params[:view] == 'deleted' ? 'btn-danger' : 'btn-outline-danger'}" %>
  </div>

  <% if params[:view] == 'deleted' %>
    <!-- Deleted Books Section -->
    <div class="p-4 bg-white rounded shadow-sm border">
      <h4 class='text-dark'>Deleted Books</h4>
      <% if @deleted_books.any? %>
        <ul class="list-group mt-3">
          <% @deleted_books.each do |book| %>
            <li class="list-group-item d-flex justify-content-between align-items-center">
              <div>
                <strong class='text-dark'><%= book.title %></strong> by <%= book.author %><br>
                <span class="text-muted">Deleted on: <%= book.deleted_at.strftime("%d-%b-%Y %I:%M %p") %></span>
              </div>
              <%= button_to '‚ôªÔ∏è Restore', restore_book_path(book),
                method: :patch, class: 'btn btn-sm btn-success' %>
            </li>
          <% end %>
        </ul>
      <% else %>
        <p class="mt-3 text-dark">No deleted books.</p>
      <% end %>
    </div>

  <% else %>
    <!-- My Books Section -->
    <div class="p-4 bg-light rounded shadow-sm">
      <h4 class="text-dark">My Books</h4>
      <% if @books.any? %>
        <div class="row row-cols-1 row-cols-md-2 g-4 mt-2">
          <% @books.each do |book| %>
            <div class="col mb-4">
              <div class="card h-100 shadow-lg border-success rounded-4">
                <div class="card-body">
                  <h5 class="card-title"><%= book.title %></h5>
                  <p><strong>Author:</strong> <%= book.author %></p>
                  <p><strong>Genre:</strong> <%= book.genre %></p>

                  <% if book.reviews.any? %>
                    <strong>Reviews:</strong>
                    <ul class="list-unstyled">
                      <% book.reviews.each do |review| %>
                        <li>‚≠ê <%= review.rating %> ‚Äì <%= review.comment %></li>
                      <% end %>
                    </ul>
                  <% else %>
                    <p class="text-muted">No reviews yet.</p>
                  <% end %>
                </div>
                <div class="card-footer d-flex justify-content-between">
                  <%= link_to 'üëÅÔ∏è View', book_path(book), class: 'btn btn-sm btn-outline-primary' %>
                  <%= link_to '‚úèÔ∏è Edit', edit_book_path(book), class: 'btn btn-sm btn-outline-warning' %>
                  <%= link_to 'üóëÔ∏è Delete', book_path(book), method: :delete,
                    data: { confirm: 'Are you sure you want to delete this book?' },
                    class: 'btn btn-sm btn-outline-danger' %>
                </div>
              </div>
            </div>
          <% end %>
        </div>
      <% else %>
        <p class="mt-3">No books found.</p>
      <% end %>
    </div>
  <% end %>
</div>
